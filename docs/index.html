<script>
    // This script self-destructs after sending JSON
    const params = new URLSearchParams(location.search);
    const assetId = params.get('id');
    
    if (assetId) {
      fetch(`https://roblox-decal-to-image-convert.aarontheluanerd.workers.dev/?id=${assetId}`)
        .then(r => r.ok ? r.json() : Promise.reject(r.status))
        .then(data => {
          const json = JSON.stringify(data);
          document.write(`<pre>${json}</pre>`);
          document.close();
          // Self-destruct the script
          document.currentScript.remove();
          document.body.firstChild.remove();
        })
        .catch(err => {
          document.write(`{"error":"Proxy failed","details":"${err}"}`);
          document.close();
        });
    } else {
      document.write('{"error":"Missing asset ID"}');
      document.close();
    }
    </script>